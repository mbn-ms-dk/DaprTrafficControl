apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: dtc-azure-kvsync
  namespace: dtc
spec:
  provider: azure
  parameters:
    usePodIdentity: "false"
    useVMManagedIdentity: "false"
    clientID: 'e71c32df-ae88-4c95-ae6c-9167cac1ffff' 
    keyvaultName: "kv-di2ohuv2juwg6"
    cloudName: ""
    tenantId: "16b3c013-d300-468d-ac64-7eda0820b6d3"
    objects:  |
      array:
        - |
          objectName: appinsightssecret
          objectType: secret    # object types: secret, key, or cert
          objectVersion: ""     # default to latest if empty
        - |
          objectName: mailserveruser
          objectType: secret    # object types: secret, key, or cert
          objectVersion: ""     # default to latest if empty
        - |
          objectName: mailserverpassword
          objectType: secret    # object types: secret, key, or cert
          objectVersion: ""     # default to latest if empty                             
  secretObjects:                              
    - secretName: appinsightssecret
      type: Opaque
      data:
      - key: appinsights-connection-string                           
        objectName: appinsightssecret                        
    - secretName: mailserveruser
      type: Opaque
      data: 
      - key: smtp.user                           
        objectName: mailserveruser
    - secretName: mailserverpassword
      type: Opaque
      data:    
      - key: smtp.password                           
        objectName: mailserverpassword
                          